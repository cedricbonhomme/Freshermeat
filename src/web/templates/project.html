{% extends "layout.html" %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col mx-auto">
            <div class="text-center">
                <img id="project-logo" src="" width="300px" />
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <h2 id="project-name"></h2>
            <div><p id="project-description" class="lead text-justify"></p></div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p>Website:&nbsp;<a id="project-website"></a></p>
        </div>
    </div>
</div><!-- /.container -->
<script>
$(document).ready(function() {
    // Get information about the project in the URL parameter
    var url = window.location.pathname;
    var project = url.split("/").slice(-1)[0];
    var filters = [{"name": "name", "op": "eq", "val": project}];
    $.ajax({
        url: "{{ url_for('projectapi0.projectapi',) }}",
        data: {"q": JSON.stringify({"filters": filters})},
        dataType: "json",
        contentType: "application/json",
        success: function(project) {
            $("#organization-name").html(project.objects[0].organization.name);
            $("#organization-name").attr("href", '/?organization=' +
                                            project.objects[0].organization.name);
            $("#project-name").html(project.objects[0].name);
            $("#project-logo").attr("src", project.objects[0].logo);
            $("#project-website").html(project.objects[0].website);
            $("#project-website").attr("href", project.objects[0].website);
            $("#project-description").html(project.objects[0].description);
            $("#project-id-input").val(project.objects[0].id);
        }
    });
});
</script>
{% endblock %}
